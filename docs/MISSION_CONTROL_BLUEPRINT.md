# EUFM Mission Control: A Design and Technical Blueprint

**Generated By:** Gemini CLI (powered by Perplexity Sonar)
**Version:** 1.0
**Date:** 2025-09-01

## 1. Executive Summary

This document provides the complete architectural design and technical implementation plan for the new "Mission Control" web interface for the EUFM Assistant. The design is heavily inspired by **Google's NotebookLM**, emphasizing a clean, source-grounded, and real-time collaborative environment. This blueprint will serve as the single source of truth for the AI Operator directing the implementation work of the AI Development Team.

## 2. Recommended Technology Stack

Based on a comprehensive analysis of modern web technologies, the following stack is recommended for its robustness, developer experience, and suitability for a data-intensive, real-time application.

*   **Frontend Framework:** **React** (using Vite for project setup).
    *   **Reasoning:** React has the largest ecosystem, the most mature libraries for state management and data fetching, and is the most common skill set for AI developers like Codex.
*   **Real-Time Communication:** **Flask-SocketIO** (on the backend).
    *   **Reasoning:** This library provides the most robust and well-documented solution for handling WebSockets within a Flask application, which is critical for our real-time features.
*   **UI Component Library:** **Material UI (MUI)** or **Ant Design**.
    *   **Reasoning:** These libraries provide a comprehensive set of high-quality, pre-built components that will allow us to build a professional and consistent UI quickly. Codex should be instructed to choose one and use it consistently.
*   **State Management:** **Redux Toolkit** or **Zustand**.
    *   **Reasoning:** A centralized state management library will be essential for managing the complex state of our real-time application.

## 3. Core UI/UX Design Principles

*   **Layout:** A two-panel layout is mandatory.
    *   **Left Panel ("Source Panel"):** This panel will display a file tree of the project's key documents (`.md`, `.py`, etc.). When a file is selected, its content will be displayed here.
    *   **Right Panel ("Workspace Panel"):** This is the main interactive area. It will contain the Agent Status Dashboard and the Unified Collaboration Hub.
*   **Aesthetics:**
    *   **Theme:** A clean, minimalist, light theme with high contrast for readability.
    *   **Icons:** Use a consistent, flat icon set (e.g., Material Design Icons).
    *   **Animations:** Animations should be subtle and functional (e.g., loading spinners, smooth transitions on hover). Avoid anything distracting.

## 4. Implementation Roadmap (Tasks for the AI Operator to Assign)

This section breaks down the implementation into a series of logical, sequential tasks. The AI Operator will create a detailed prompt for Codex for each of these tasks.

### Phase 1: Backend API for Mission Control

1.  **Task: Implement WebSocket Backend**
    *   **File to Modify:** `eufm/app/__init__.py`
    *   **File to Create:** `eufm/app/api/collaboration.py`
    *   **Instructions:**
        1.  Integrate the `Flask-SocketIO` library into the main application factory.
        2.  Create a new Flask Blueprint for the collaboration API.
        3.  Implement a basic WebSocket endpoint that allows multiple clients to connect and handles simple "message" events for a real-time chat.

2.  **Task: Implement Agent Status Broadcaster**
    *   **File to Modify:** `eufm/app/services/agent_orchestrator.py`
    *   **Instructions:**
        1.  Modify the `AgentOrchestrator` to accept the `socketio` instance from the Flask app.
        2.  At key points in the agent lifecycle (e.g., when a task is created, when its status changes), use `socketio.emit()` to broadcast the updated status to all connected clients.

### Phase 2: Frontend Application Setup

3.  **Task: Initialize Frontend Project**
    *   **Directory to Create:** `eufm/frontend/`
    *   **Instructions:**
        1.  Create a new React project using Vite.
        2.  Choose and install a UI component library (MUI or Ant Design).
        3.  Create the basic two-panel layout with a placeholder for the Source Panel and the Workspace Panel.

### Phase 3: Frontend Component Implementation

4.  **Task: Build the "Source Panel"**
    *   **Component to Create:** `frontend/src/components/SourcePanel.jsx`
    *   **Instructions:**
        1.  Create a new API endpoint in the Flask backend that returns a list of all the files in the `eufm/docs/` and `eufm/app/` directories.
        2.  The `SourcePanel` component should fetch this list and display it as a file tree.
        3.  When a file is clicked, it should fetch the content of that file and display it in the panel.

5.  **Task: Build the "Agent Status Dashboard"**
    *   **Component to Create:** `frontend/src/components/AgentStatusDashboard.jsx`
    *   **Instructions:**
        1.  This component must connect to the backend WebSocket.
        2.  It should listen for the "agent_status_update" events.
        3.  It should display the status of all active and queued agents in a clean, Kanban-style layout (columns for "Queued," "Running," "Completed," "Failed").

6.  **Task: Build the "Unified Collaboration Hub"**
    *   **Component to Create:** `frontend/src/components/CollaborationHub.jsx`
    *   **Instructions:**
        1.  This component will be a simple, real-time chat interface.
        2.  It should have an input box for typing messages and a display area for the conversation.
        3.  When a user sends a message, it should be sent to the backend via the WebSocket.
        4.  It should listen for incoming "message" events from the WebSocket and display them in the conversation area.
